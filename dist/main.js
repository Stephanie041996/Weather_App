(()=>{"use strict";const t=(t,a)=>{e(t),n(a)},e=t=>{document.getElementById("currentForecast_location").textContent=t},n=t=>{document.getElementById("confirmation").textContent=t},a=()=>{const t=document.getElementById("currentForecast");t.classList.toggle("zero-vis"),t.classList.toggle("fade-in");const e=document.getElementById("dailyForecast");e.classList.toggle("zero-vis"),e.classList.toggle("fade-in")},o=t=>{let e=t.lastElementChild;for(;e;)t.removeChild(e),e=t.lastElementChild},s=(t,e)=>{const n=c("div","icon");n.id="icon";const a=r(t);return a.ariaHidden=!0,a.title=e,n.appendChild(a),n},c=(t,e,n,a)=>{const o=document.createElement(t);if(o.className=e,n&&(o.textContent=n),"temp"===e){const t=document.createElement("div");t.className="unit",t.textContent=a,o.appendChild(t)}return o},r=t=>{const e=document.createElement("i"),n=t.slice(0,2),a=t.slice(2);switch(n){case"01":"d"===a?e.classList.add("far","fa-sun"):e.classList.add("far","fa-moon");break;case"02":"d"===a?e.classList.add("fas","fa-cloud-sun"):e.classList.add("fas","fa-cloud-moon");break;case"03":e.classList.add("fas","fa-cloud");break;case"04":e.classList.add("fas","fa-cloud-meatball");break;case"09":e.classList.add("fas","fa-cloud-rain");break;case"10":"d"===a?e.classList.add("fas","fa-cloud-sun-rain"):e.classList.add("fas","fa-cloud-moon-rain");break;case"11":e.classList.add("fas","fa-poo-storm");break;case"13":e.classList.add("far","fa-snowflake");break;case"50":e.classList.add("fas","fa-smog");break;default:e.classList.add("far","fa-question-circle")}return e},i="daa924b1f6a30f8b2c6d65530ac6a787",d=(t,e)=>{const{lat:n,lon:a,name:o,unit:s}=e;t.setLat(n),t.setLon(a),t.setName(o),s&&t.setUnit(s)},l=new class{constructor(){this._name="Current Location",this._lat=null,this._lon=null,this._unit="imperial"}getName(){return this._name}setName(t){this._name=t}getLat(){return this._lat}setLat(t){this._lat=t}getLon(){return this._lon}setLon(t){this._lon=t}getUnit(){return this._unit}setUnit(t){this._unit=t}toggleUnit(){return this._unit="imperial"===this.unit?"metric":"imperial"}};document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("getLocation").addEventListener("click",u),document.getElementById("home").addEventListener("click",h),document.getElementById("saveLocation").addEventListener("click",p),document.getElementById("unit").addEventListener("click",y),document.getElementById("refresh").addEventListener("click",L),document.getElementById("searchBar_form").addEventListener("submit",E),(()=>{const t=document.getElementById("searchBar_text");window.innerWidth<400?t.placeholder="City, State, Country":t.placeholder="City, State, Country, or Zip Code"})(),h()}));const u=t=>{if(!navigator.geolocation)return m();navigator.geolocation.getCurrentPosition(g,m)},m=e=>{const n=e?e.message:"Geolocation not supported";t(n,n)},g=t=>{const e={lat:t.coords.latitude,lon:t.coords.longitude,name:`Lat:${t.coords.latitude} Long:${t.coords.longitude}`};d(l,e),v(l)},h=e=>{const n=localStorage.getItem("defaultWeatherLocation");if(!n&&!e)return u();n||"click"!==e.type?(n&&!e||document.querySelector(".fa-home"),f(n)):t("No Home Location Saved.","Sorry. Please save your home location first.")},f=t=>{if("string"==typeof t){const e=JSON.parse(t),n={lat:e.lat,lon:e.lon,name:e.name,unit:e.unit};d(l,n),v(l)}},p=()=>{if(l.getLat()&&l.getLon()){document.querySelector(".fa-save");const t={name:l.getName(),lat:l.getLat(),lon:l.getLon(),unit:l.getUnit()};localStorage.setItem("defaultWeatherLocation",JSON.stringify(t)),n(`Saved ${l.getName()} as home location.`)}},y=()=>{document.querySelector(".fa-chart-bar"),l.toggleUnit(),v(l)},L=()=>{document.querySelector(".fa-sync-alt"),v(l)},E=async e=>{e.preventDefault();const n=document.getElementById("searchBar_text").value.replaceAll(/ {2,}/g," ").trim();if(!n.length)return;document.querySelector(".fa-search");const a=await(async(t,e)=>{const n=/^\d+$/g.test(t)?"zip":"q",a=encodeURI(`https://api.openweathermap.org/data/2.5/weather?${n}=${t}&units=${e}&appid=${i}`);try{const t=await fetch(a);return await t.json()}catch(t){console.error(t.stack)}})(n,l.getUnit());if(a)if(200===a.cod){const t={lat:a.coord.lat,lon:a.coord.lon,name:a.sys.country?`${a.name}, ${a.sys.country}`:a.name};d(l,t),v(l)}else displayApiError(a);else t("Connection Error","Connection Error")},v=async t=>{const r=await(async t=>{const e=`https://api.openweathermap.org/data/2.5/onecall?lat=${t.getLat()}&lon=${t.getLon()}&exclude=minutely,hourly,alerts&units=${t.getUnit()}&appid=${i}`;try{const t=await fetch(e);return await t.json()}catch(t){console.error(t)}})(t);r&&((t,r)=>{a(),(()=>{const t=document.getElementById("currentForecast_conditions");o(t);const e=document.getElementById("dailyForecast_contents");o(e)})();(t=>{document.documentElement.classList.add(t),document.documentElement.classList.forEach((e=>{e!==t&&document.documentElement.classList.remove(e)}))})((t=>{const e=t.slice(0,2),n=t.slice(2),a={"09":"snow",10:"rain",11:"rain",13:"snow",50:"fog"};let o;return o=a[e]?a[e]:"d"===n?"clouds":"night",o})(t.current.weather[0].icon));const i=((t,e)=>{const n=e.getName(),a="imperial"===e.getUnit()?"Fahrenheit":"Celsius";return`${t.current.weather[0].description} and ${Math.round(Number(t.current.temp))}°${a} in ${n}`})(t,r);n(i),e(r.getName());(t=>{const e=document.getElementById("currentForecast_conditions");t.forEach((t=>{e.appendChild(t)}))})(((t,e)=>{const n="imperial"===e?"mph":"m/s",a=s(t.current.weather[0].icon,t.current.weather[0].description),o=c("div","temp",`${Math.round(Number(t.current.temp))}°`),r=t.current.weather[0].description.split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ");return[a,o,c("div","desc",r),c("div","feels",`Feels Like ${Math.round(Number(t.current.feels_like))}°`),c("div","maxtemp",`High ${Math.round(Number(t.daily[0].temp.max))}°`),c("div","mintemp",`Low ${Math.round(Number(t.daily[0].temp.min))}°`),c("div","humidity",`Humidity ${t.current.humidity}%`),c("div","wind",`Wind ${Math.round(Number(t.current.wind_speed))} ${n}`)]})(t,r.getUnit())),document.getElementById("searchBar_text").focus(),a()})(r,t),console.log(r)}})();